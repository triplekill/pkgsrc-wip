$NetBSD$

--- type.c.orig	2004-03-18 18:46:17.000000000 +0100
+++ type.c	2004-07-01 19:21:37.000000000 +0200
@@ -1278,5 +1278,5 @@
 	env = getenv("XDG_DATA_DIRS");
 	if (!env)
-		env = "/usr/local/share/:/usr/share/";
+		env = "/usr/local/share/:/usr/share/:@PREFIX@/share/";
 	dirs = g_strsplit(env, ":", 0);
 	g_return_val_if_fail(dirs != NULL, NULL);
@@ -1423,4 +1423,10 @@
 		guchar *path;
 		
+		path = g_strdup_printf("@PREFIX@/share/mime/%s/%s.xml",
+				type->media_type, type->subtype);
+		get_comment(type, path);
+		if (type->comment)
+			return;
+
 		path = g_strdup_printf("%s/mime/%s/%s.xml", dirs[i],
 				type->media_type, type->subtype);
