$NetBSD$
--- io/hpiod/hpiod.h.orig	2006-09-15 19:34:33.000000000 -0400
+++ io/hpiod/hpiod.h
@@ -51,7 +51,7 @@
 #endif
 #include "list.h"
 #include "usbext.h"
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined (__NetBSD__)
 #include <dev/usb/usb.h>
 #endif
 
@@ -146,17 +146,33 @@ typedef struct
                        else if (x >= 'a' && x <= 'f') i |= 0xA + x - 'a'
 
 #if defined(WORDS_BIGENDIAN)
+#ifndef htole16
 #define htole16(A) ((((uint16_t)(A) & 0xff00) >> 8) | (((uint16_t)(A) & 0x00ff) << 8))    /* host to little-endian 16-bit value */
+#endif
+#ifndef letoh16
 #define letoh16 htole16                         /* little-endian to host 16-bit value */
+#endif
+#ifndef htole32
 #define htole32(A) ((((uint32_t)(A) & (uint32_t)0x000000ff) << 24) | (((uint32_t)(A) & (uint32_t)0x0000ff00) << 8) | \
                   (((uint32_t)(A) & (uint32_t)0x00ff0000) >> 8) | (((uint32_t)(A) & (uint32_t)0xff000000) >> 24))
+#endif
+#ifndef letoh32
 #define letoh32 htole32
+#endif
 #else
+#ifndef htole16
 #define htole16(A) (A)
+#endif
+#ifndef letoh16
 #define letoh16(A) (A)
+#endif
+#ifndef letoh32
 #define letoh32(A) (A)
+#endif
+#ifndef htole32
 #define htole32(A) (A)
 #endif
+#endif
 
 enum RESULT_CODE
 {
