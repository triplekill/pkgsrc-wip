$NetBSD$

--- include/modules.h.orig	2006-03-27 09:35:55.000000000 +0100
+++ include/modules.h
@@ -40,7 +40,7 @@ typedef void *	ano_module_t;
 #define ano_moderr()			dlerror()
 #define ano_modsym(file, symbol)	dlsym(file, DL_PREFIX symbol)
 #define ano_modclose(file)		dlclose(file)
-#define ano_modclearerr()		errno = 0
+#define ano_modclearerr()		dlerror()
 #define MODULE_EXT			".so"
 
 #endif
