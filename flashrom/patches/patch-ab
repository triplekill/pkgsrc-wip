$NetBSD$

--- flash.h.orig	2009-05-01 16:34:32.000000000 +0000
+++ flash.h
@@ -38,6 +38,19 @@
 #include <asm/sunddi.h>
 #endif
 
+#if defined(__NetBSD__) && defined(__i386__) || defined(__x86_64__)
+  #include <sys/types.h>
+  #include <machine/sysarch.h>
+  #include "pio.h"
+  #if defined(__i386__)
+    #define iopl i386_iopl
+  #elif defined(__x86_64__)
+    #define iopl x86_64_iopl
+  #endif
+  #define off64_t off_t
+  #define lseek64 lseek
+#endif
+
 #if (defined(__MACH__) && defined(__APPLE__))
 #define __DARWIN__
 #endif
