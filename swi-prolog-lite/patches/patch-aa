$NetBSD: patch-aa,v 1.4 2002/05/03 21:31:02 jtb Exp $

--- src/Makefile.in.orig	Tue Apr  9 20:09:31 2002
+++ src/Makefile.in	Wed May  1 19:41:34 2002
@@ -63,6 +63,7 @@
 ARCH=@ARCH@
 INSTALL=@INSTALL@
 INSTALL_PROGRAM=@INSTALL_PROGRAM@
+INSTALL_SCRIPT=@INSTALL_SCRIPT@
 INSTALL_DATA=@INSTALL_DATA@
 MKDIR=@MKDIR@
 REL_LN=$(srcdir)/rel-ln
@@ -71,8 +72,9 @@
 CWFLAGS=@CWFLAGS@
 CIFLAGS=@CIFLAGS@
 CMFLAGS=@CMFLAGS@
-CFLAGS=	$(CWFLAGS) $(COFLAGS) $(CIFLAGS) $(CMFLAGS)
+CFLAGS+= $(CWFLAGS) $(COFLAGS) $(CIFLAGS) $(CMFLAGS)
 LDFLAGS=@LDFLAGS@
+CPPFLAGS=@CPPFLAGS@
 
 PLFOREIGN=@PLFOREIGN@
 
@@ -135,7 +137,7 @@
 	plld
 
 .c.o:
-	$(CC) -c -I. -I$(srcdir) -I$(srcdir)/rc $(CFLAGS) $< @COUTOPT@
+	$(CC) -c -I. -I$(srcdir) -I$(srcdir)/rc $(CPPFLAGS) $(CFLAGS) $< @COUTOPT@
 
 system:		$(PL)
 startup:	$(STARTUPPATH)
@@ -242,7 +244,7 @@
 		ar x `$(CC) -print-libgcc-file-name` $@
 
 plld:		$(srcdir)/plld.c
-		$(CC) -I. -I$(srcdir) $(CFLAGS) -o $@ $(srcdir)/plld.c
+		$(CC) -I. -I$(srcdir) $(CPPFLAGS) $(CFLAGS) -o $@ $(srcdir)/plld.c
 
 tags:		$(srcdir)/TAGS
 
@@ -322,7 +324,7 @@
 		$(INSTALL_DATA) ../dotfiles/dotplrc $(PLBASE)/dotfiles
 		$(INSTALL_DATA) ../dotfiles/dotxpcerc $(PLBASE)/dotfiles
 		$(INSTALL_DATA) ../dotfiles/README $(PLBASE)/dotfiles
-		$(INSTALL_PROGRAM) ../dotfiles/edit $(PLBASE)/dotfiles
+		$(INSTALL_SCRIPT) ../dotfiles/edit $(PLBASE)/dotfiles
 
 iinclude::
 		cd ../include; \
