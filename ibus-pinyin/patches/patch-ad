$NetBSD$

--- src/PinyinParser.cc.orig	2010-04-08 10:28:18.000000000 +0000
+++ src/PinyinParser.cc
@@ -59,8 +59,8 @@ is_pinyin (const gchar *p,
         return NULL;
     }
 
-    len = strnlen (p, 6);
-    len = MIN (len, end - p);
+    /* len < 0 */
+    len = MIN (6, end - p);
     strncpy (buf, p, len);
 
     for (; len > 0; len --) {
