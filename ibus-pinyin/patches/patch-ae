$NetBSD$

--- src/Util.h.orig	2010-01-01 11:20:05.000000000 +0000
+++ src/Util.h
@@ -1,7 +1,17 @@
 #ifndef __PY_UTIL_H_
 #define __PY_UTIL_H_
 
+#ifdef HAVE_CONFIG_H
+#include "config.h"
+#endif
+
+#if defined(HAVE_UUID_H)
+#include <uuid.h>
+#elif defined(HAVE_UUID_UUID_H)
 #include <uuid/uuid.h>
+#elif defined(HAVE_SYS_UUID_H)
+#include <sys/uuid.h>
+#endif
 #include <sys/utsname.h>
 #include <stdlib.h>
 #include "String.h"
@@ -12,8 +22,16 @@ class UUID {
 public:
     UUID (void) {
         uuid_t u;
+#if defined(HAVE_UUID_CREATE)
+        char* l_uuid;
+        uuid_create (&u, 0);
+        uuid_to_string (&u, &l_uuid, 0);
+        strncpy (m_uuid, l_uuid, sizeof(m_uuid));
+        free(l_uuid);
+#elif defined(HAVE_UUID_GENERATE)
         uuid_generate (u);
         uuid_unparse (u, m_uuid);
+#endif
     }
 
     operator const gchar * (void) const {
