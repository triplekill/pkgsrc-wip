$NetBSD$

--- configure.orig	2008-10-17 12:56:20.000000000 +0000
+++ configure
@@ -10347,7 +10347,7 @@ if test $ac_cv_header_db_h = yes; then
 	fi
 
 	saved_LIBS=$LIBS
-        for dbname in ${with_bdb} db-4.6 db4.6 db46 db-4.5 db4.5 db45 db-4.4 db4.4 db44 db-4.3 db4.3 db43 db-4.2 db4.2 db42 db-4.1 db4.1 db41 db-4.0 db4.0 db-4 db40 db4 db-3.3 db3.3 db33 db-3.2 db3.2 db32 db-3.1 db3.1 db31 db-3 db30 db3 db
+        for dbname in ${BDB_TYPE} ${with_bdb} db-4.6 db4.6 db46 db-4.5 db4.5 db45 db-4.4 db4.4 db44 db-4.3 db4.3 db43 db-4.2 db4.2 db42 db-4.1 db4.1 db41 db-4.0 db4.0 db-4 db40 db4 db-3.3 db3.3 db33 db-3.2 db3.2 db32 db-3.1 db3.1 db31 db-3 db30 db3 db
           do
 	    LIBS="$saved_LIBS -l$dbname"
 	    cat >conftest.$ac_ext <<_ACEOF
@@ -11462,7 +11462,7 @@ fi
 
 done
 
-	if test "$ac_cv_header_pcreposix_h" == "yes"; then
+	if test "$ac_cv_header_pcreposix_h" = "yes"; then
 		LIBS="$LIBS -lpcre -lpcreposix";
 
 cat >>confdefs.h <<\_ACEOF
@@ -11470,7 +11470,7 @@ cat >>confdefs.h <<\_ACEOF
 _ACEOF
 
 	else
-		if test "$ac_cv_header_rxposix_h" == "yes"; then
+		if test "$ac_cv_header_rxposix_h" = "yes"; then
 			LIBS="$LIBS -lrx"
 
 cat >>confdefs.h <<\_ACEOF
@@ -16477,7 +16477,11 @@ echo "${ECHO_T}$ac_cv_header_gssapi_gssa
 
 fi
 if test $ac_cv_header_gssapi_gssapi_h = yes; then
-  :
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_GSSAPI_H
+_ACEOF
+
 else
   { echo "$as_me:$LINENO: WARNING: Disabling GSSAPI - no include files found" >&5
 echo "$as_me: WARNING: Disabling GSSAPI - no include files found" >&2;}; gssapi=no
@@ -18347,6 +18351,7 @@ elif test "${with_perl}" != "no"; then
     EXTRA_SUBDIRS="${EXTRA_SUBDIRS} perl"
     PERL_SUBDIRS="imap"
     PERL="${with_perl}"
+    eval `${PERL} -V:cccdlflags`
     PERL_CCCDLFLAGS="$cccdlflags"
 
 fi
