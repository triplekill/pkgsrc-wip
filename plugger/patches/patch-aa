--- Makefile.orig	2001-12-07 16:59:20.000000000 +0100
+++ Makefile	2003-06-11 14:56:44.000000000 +0200
@@ -1,8 +1,8 @@
 # Where is your Plugin Source Development Kit from Netscape?
-SDK=/home/hubbe/src/PluginSDK30b5
+SDK=../PluginSDK30b5
 
 # Where is your Xwindows located?
-X11=/usr/X11/
+X11=${X11BASE}
 
 #
 # For building rpms
@@ -10,7 +10,7 @@
 
 # You may want to change this to /usr/ on
 # some installations.
-prefix=/usr/local
+prefix=${PREFIX}
 
 #
 #
@@ -64,6 +64,9 @@
 freebsd-elf:
 	make all CC=gcc XCFLAGS=-fpic LD=gcc XLDFLAGS=-shared X11=/usr/X11R6/
 
+netbsd:
+	make all XLDFLAGS=-shared XLIBS="-R${X11}/lib -L${X11}/lib -lX11"
+
 auto:
 	@case "x`uname`" in \
 	  xLinux) make linux ;; \
@@ -72,6 +75,7 @@
 	  xOSF1) make du ;;\
 	  xIRIX) make irix ;;\
 	  xAIX) make aix ;;\
+	  xNetBSD) make netbsd ;;\
 	esac
 
 # For other systems, look at the example makefiles in the
@@ -115,7 +119,7 @@
 	$(LDSHARED) $(COMMON_LDFLAGS) -o plugger.so plugger.o common.o
 
 plugger.o: plugger.c plugger.h
-	$(CC) -c $(SHARED_CFLAGS) -o plugger.o plugger.c
+	$(CC) -c -DCONFDIR=\"${PKG_SYSCONFDIR}\" $(SHARED_CFLAGS) -o plugger.o plugger.c
 
 common.o: $(SDK)/common/npunix.c
 	$(CC) -c $(SHARED_CFLAGS) -o common.o $(SDK)/common/npunix.c
@@ -141,17 +145,10 @@
 
 
 install:
-	-@mkdir $(root)$(prefix) 1>/dev/null 2>&1 || :
-	-@mkdir $(root)$(prefix)/bin 1>/dev/null 2>&1 || :
-	-@mkdir $(root)$(prefix)/lib 1>/dev/null 2>&1 || :
-	-@mkdir $(root)$(prefix)/man 1>/dev/null 2>&1 || :
-	-@mkdir $(root)$(prefix)/man/man7 1>/dev/null 2>&1 || :
-	-@mkdir $(root)$(prefix)/lib/netscape 1>/dev/null 2>&1 || :
-	-@mkdir $(root)$(prefix)/lib/netscape/plugins 1>/dev/null 2>&1 || :
-	cp plugger-$(VERSION) $(root)$(prefix)/bin/
-	cp plugger.so $(root)$(prefix)/lib/netscape/plugins/
-	if [ ! -f $(root)/etc/pluggerrc-$(VERSION) ]; then cp pluggerrc $(root)/etc/pluggerrc-$(VERSION) ; fi
-	cp plugger.7 $(root)$(prefix)/man/man7/
+	${BSD_INSTALL_DATA_DIR} ${PREFIX}/share/examples/plugger
+	${BSD_INSTALL_DATA} pluggerrc  ${PREFIX}/share/examples/plugger/pluggerrc
+	${BSD_INSTALL_PROGRAM} plugger-${VERSION} ${PREFIX}/bin/plugger-${VERSION}
+	${BSD_INSTALL_DATA} plugger.7 ${PREFIX}/man/man7/plugger.7
 
 plugger-$(VERSION).tar.gz: $(BASE_FILES) $(SOURCE_FILES)
 	@( DIR=`pwd`;\
