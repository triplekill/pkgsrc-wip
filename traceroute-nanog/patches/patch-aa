$NetBSD$

--- traceroute.c.orig	2005-11-26 21:30:10.000000000 +0100
+++ traceroute.c	2005-11-26 21:33:05.000000000 +0100
@@ -1731,7 +1731,7 @@
         struct timeval wait;
         struct timeval now;
         int cc = 0;
-        int fromlen = sizeof (*from);
+        socklen_t fromlen = sizeof (*from);
 
 #ifndef __linux__
         gettimeofday(&now, NULL);
@@ -2537,8 +2537,12 @@
    connect to.  A getenv() of the following elements occurs at run-time,
    which may override these values. */
 
+#ifndef RA_SERVER
 #define RA_SERVER "whois.ra.net"
+#endif
+#ifndef RA_SERVICE
 #define RA_SERVICE "whois"
+#endif
 
 /* The following determines what fields will be returned for the -A value
    (/AS_LOOKUP for VMS).  This is the "origin" of the route entry in the
@@ -2929,9 +2933,9 @@
 
     name[0]=0;
     off = doname(ans,off,name);
-    typ = ntohs(getshort(ans+off));
+    typ = ntohs(getshort((char *)(ans+off)));
     off = dotype(ans,off);
-    class = ntohs(getshort(ans+off));
+    class = ntohs(getshort((char *)(ans+off)));
     off = doclass(ans,off);
     off = dottl(ans,off);
     off = dordata(ans,off,class,typ,name,contact_ptr);
@@ -2994,7 +2998,7 @@
 char *fname;
 char **contact_ptr;
 {
-    int len = ntohs(getshort(ans+off));
+    int len = ntohs(getshort((char *)(ans+off)));
     int retval = off+len+2;
     int i,j;
     char name[256];
