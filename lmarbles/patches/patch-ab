$NetBSD$

--- src/cfg.c.orig	2002-11-24 16:56:08.000000000 +0100
+++ src/cfg.c
@@ -41,9 +41,9 @@ void C_StPth()
 {
     DIR *dir;
 #ifdef _WIN32
-    snprintf( c_pth, strlen(c_pth)-1, "%s/lgames", (getenv( "HOME" )?getenv( "HOME" ):".") );
+    snprintf( c_pth, sizeof(c_pth)-1, "%s/lgames", (getenv( "HOME" )?getenv( "HOME" ):".") );
 #else
-    snprintf( c_pth, strlen(c_pth)-1, "%s/.lgames", getenv( "HOME" ) );
+    snprintf( c_pth, sizeof(c_pth)-1, "%s/.lgames", getenv( "HOME" ) );
 #endif
     /* create .lgames directory if not found */
     if ( (dir = opendir( c_pth )) == 0 ) {
@@ -140,6 +140,12 @@ void C_Sv()
 {
     //save init //
     FILE	*f = fopen(c_pth, "w");
+
+    if (f == NULL) {
+        warn("C_Sv: %s", c_pth);
+        return; /* Non fatal */
+    } 
+
 #ifdef ASCII
     char    str[256];
 
