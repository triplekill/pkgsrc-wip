$NetBSD$

--- talk/base/physicalsocketserver.cc.orig	2008-09-16 14:55:22.000000000 +0100
+++ talk/base/physicalsocketserver.cc
@@ -42,6 +42,9 @@ extern "C" {
 #include <unistd.h>
 #include <sys/socket.h>
 #include <netinet/in.h>
+#ifdef __NetBSD__
+#include <netinet/in_systm.h>
+#endif
 #include <netinet/ip.h>
 #include <string.h>
 }
@@ -149,10 +152,12 @@ public:
     }
     // FIXME: use SOPRIO_CONVERSATIONAL instead of numeric value
     int prio = 6;
+#ifndef __NetBSD__
     if (::setsockopt(s_, SOL_SOCKET, SO_PRIORITY, &prio, sizeof(prio)) < 0)
     {
       perror("::setsockopt(,SOL_SOCKET, SO_PRIORITY,)");
     }
+#endif
     enabled_events_ = kfRead | kfWrite;
     return s_ != INVALID_SOCKET;
   }
