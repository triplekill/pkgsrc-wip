$NetBSD$

--- cmos_lowlevel.c.orig	2008-06-13 17:40:59.000000000 +0000
+++ cmos_lowlevel.c
@@ -29,7 +29,9 @@
  *  59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.
 \*****************************************************************************/
 
-#include <sys/io.h>
+#include <sys/types.h>
+#include <machine/sysarch.h>
+#include "pio.h"
 #include "common.h"
 #include "cmos_lowlevel.h"
 
@@ -218,7 +220,7 @@ void cmos_write_all (unsigned char data[
 void set_iopl (int level)
  { assert((level >= 0) && (level <= 3));
 
-   if (iopl(level))
+   if (i386_iopl(level))
     { fprintf(stderr,
               "%s: iopl() system call failed.  You must be root to do "
               "this.\n",
