$NetBSD$

--- smbldap_tools.pm.orig	2006-01-03 21:57:41.000000000 +1100
+++ smbldap_tools.pm
@@ -32,21 +32,21 @@ use Unicode::MapUTF8 qw(to_utf8 from_utf
 # ugly funcs using global variables and spawning openldap clients
 
 my $smbldap_conf;
-if (-e "/etc/smbldap-tools/smbldap.conf") {
-	$smbldap_conf="/etc/smbldap-tools/smbldap.conf";
+if (-e "@PREFIX@/etc/smbldap-tools/smbldap.conf") {
+	$smbldap_conf="@PREFIX@/etc/smbldap-tools/smbldap.conf";
 } else {
 	$smbldap_conf="/etc/opt/IDEALX/smbldap-tools/smbldap.conf";
 }
 
 my $smbldap_bind_conf;
-if (-e "/etc/smbldap-tools/smbldap_bind.conf") {
-	$smbldap_bind_conf="/etc/smbldap-tools/smbldap_bind.conf";
+if (-e "@PREFIX@/etc/smbldap-tools/smbldap_bind.conf") {
+	$smbldap_bind_conf="@PREFIX@/etc/smbldap-tools/smbldap_bind.conf";
 } else {
 	$smbldap_bind_conf="/etc/opt/IDEALX/smbldap-tools/smbldap_bind.conf";
 }
 my $samba_conf;
-if (-e "/etc/samba/smb.conf") {
-	$samba_conf="/etc/samba/smb.conf";
+if (-e "@PREFIX@/etc/samba/smb.conf") {
+	$samba_conf="@PREFIX@/etc/samba/smb.conf";
 } else {
 	$samba_conf="/usr/local/samba/lib/smb.conf";
 }
@@ -549,8 +549,8 @@ sub add_posix_machine
 										   'uid'   => "$user",
 										   'uidNumber'   => "$uid",
 										   'gidNumber'   => "$gid",
-										   'homeDirectory'   => '/dev/null',
-										   'loginShell'   => '/bin/false',
+										   'homeDirectory'   => '/nonexistent',
+										   'loginShell'   => '/sbin/nologin',
 										   'description'   => 'Computer',
                                                                                   'gecos'   => 'Computer',
 										  ]
