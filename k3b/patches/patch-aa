$NetBSD$

--- src/core/k3bglobals.cpp.orig	2005-01-19 13:54:42.000000000 +0100
+++ src/core/k3bglobals.cpp
@@ -39,8 +39,15 @@
 #include <sys/param.h>
 #include <sys/mount.h>
 #else
+#ifdef HAVE_SYS_STATVFS
+#include <sys/statvfs.h>
+#else
+#ifdef HAVE_SYS_STATFS
 #include <sys/vfs.h>
 #endif
+#endif
+#endif
+#endif
 
 
 
@@ -217,9 +224,16 @@ QString K3b::systemName()
 
 bool K3b::kbFreeOnFs( const QString& path, unsigned long& size, unsigned long& avail )
 {
+#if HAVE_STATVFS
+  struct statvfs fs;
+  if( ::statvfs( QFile::encodeName(path), &fs ) == 0 ) {
+#else
+  #if HAVE_STATFS
   struct statfs fs;
 
   if( ::statfs( QFile::encodeName(path), &fs ) == 0 ) {
+  #endif
+#endif
     unsigned long kBfak = fs.f_bsize/1024;
 
     size = fs.f_blocks*kBfak;
