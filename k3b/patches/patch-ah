$NetBSD$

--- libk3bdevice/k3bdevicemanager.cpp.orig	2009-09-20 03:38:40.000000000 +1200
+++ libk3bdevice/k3bdevicemanager.cpp
@@ -38,6 +38,7 @@
 #include <Solid/OpticalDrive>
 #include <Solid/Block>
 #include <Solid/Device>
+#include <Solid/GenericInterface>
 
 #include <iostream>
 #include <limits.h>
@@ -354,7 +355,7 @@ bool K3b::Device::DeviceManager::saveCon
 
 K3b::Device::Device* K3b::Device::DeviceManager::addDevice( const Solid::Device& solidDevice )
 {
-    if ( findDevice( solidDevice.as<Solid::Block>()->device() ) ) {
+    if ( findDevice( solidDevice.as<Solid::GenericInterface>()->propertyExists("block.netbsd.raw_device") ? solidDevice.as<Solid::GenericInterface>()->property("block.netbsd.raw_device").toString() : solidDevice.as<Solid::Block>()->device() ) ) {
         kDebug() << "(K3b::Device::DeviceManager) dev " << solidDevice.as<Solid::Block>()->device()  << " already found";
         return 0;
     }
