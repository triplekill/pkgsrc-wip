$NetBSD$

--- encode.c.orig	2003-08-25 05:44:51.000000000 +0200
+++ encode.c
@@ -25,6 +25,7 @@
 #include <string.h>
 #include <sys/types.h>
 #include <sys/stat.h>
+#include <libgen.h>
 #include <unistd.h>
 #include <signal.h>
 #include <gnome.h>
@@ -586,8 +587,8 @@ int start_encode(int mode, char *newfile
 	close(1);		/* close stdout on parent  */
 
 	/*  Main  Parent (proc 1) */
-	close(fileno(in_fd));	/* done reading/writing from program */
-	close(fileno(out_fd));
+	close(fileno((FILE*)in_fd));	/* done reading/writing from program */
+	close(fileno((FILE*)out_fd));
 
 	close(f_des[0]);	/*  overall parent closes pipes so that  */
 	close(f_des[1]);	/*  processes terminate on time */
