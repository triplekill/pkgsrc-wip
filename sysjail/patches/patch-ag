$NetBSD$

--- src/intercept-ipc.c.orig	2006-05-05 22:34:54.000000000 +0200
+++ src/intercept-ipc.c
@@ -29,7 +29,11 @@
  */
 #include <sys/param.h>
 #include <sys/syscall.h>
+#ifdef __NetBSD__
+#include <systrace.h>
+#else
 #include <dev/systrace.h>
+#endif
 
 #include <assert.h>
 #include <errno.h>
@@ -69,10 +73,12 @@ inter_ipc(int fd, struct str_message *ms
 		rep_inter(msg->msg_pid, "msgrcv(-, -, -, -)");
 		rep_deny(msg->msg_pid, "msgrcv(-, -, -, -)");
 		return(0);
+#ifndef __NetBSD__
 	} else if (code == SYS_msgctl) {
 		rep_inter(msg->msg_pid, "msgctl(-, -, -)");
 		rep_deny(msg->msg_pid, "msgctl(-, -, -)");
 		return(0);
+#endif
 	} else if (code == SYS_semget) {
 		rep_inter(msg->msg_pid, "semget(-, -, -)");
 		rep_deny(msg->msg_pid, "semget(-, -, -)");
@@ -81,10 +87,12 @@ inter_ipc(int fd, struct str_message *ms
 		rep_inter(msg->msg_pid, "semop(-, -, -)");
 		rep_deny(msg->msg_pid, "semop(-, -, -)");
 		return(0);
+#ifndef __NetBSD__
 	} else if (code == SYS___semctl) {
 		rep_inter(msg->msg_pid, "semctl(-, -, -, -)");
 		rep_deny(msg->msg_pid, "semctl(-, -, -, -)");
 		return(0);
+#endif
 	} else if (code == SYS_shmat) {
 		rep_inter(msg->msg_pid, "shmat(-, -, -)");
 		rep_deny(msg->msg_pid, "shmat(-, -, -)");
@@ -97,10 +105,12 @@ inter_ipc(int fd, struct str_message *ms
 		rep_inter(msg->msg_pid, "shmget(-, -, -)");
 		rep_deny(msg->msg_pid, "shmget(-, -, -)");
 		return(0);
+#ifndef __NetBSD__
 	} else if (code == SYS_shmctl) {
 		rep_inter(msg->msg_pid, "shmctl(-, -, -)");
 		rep_deny(msg->msg_pid, "shmctl(-, -, -)");
 		return(0);
+#endif
 	}
 	/* We should never get here. */
 	assert(0);
