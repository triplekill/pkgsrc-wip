$NetBSD$

--- ntpq/ntpq.c.orig	Wed Aug  6 17:58:23 2003
+++ ntpq/ntpq.c	Wed Aug  6 17:59:37 2003
@@ -621,7 +621,7 @@
 	hints.ai_flags = AI_NUMERICHOST;
 
 	a_info = getaddrinfo(hname, service, &hints, &ai);
-	if (a_info == EAI_NONAME) {
+	if (a_info == EAI_NONAME || a_info == EAI_NODATA) {
 		hints.ai_flags = AI_CANONNAME;
 #ifdef AI_ADDRCONFIG
 		hints.ai_flags |= AI_ADDRCONFIG;
