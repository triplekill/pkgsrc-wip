$NetBSD$

--- Python/thread_pth.h.orig	2002-01-19 23:02:55.000000000 +0100
+++ Python/thread_pth.h	2003-08-02 15:26:12.000000000 +0200
@@ -30,6 +30,8 @@
 
 #define CHECK_STATUS(name)  if (status == -1) { printf("%d ", status); perror(name); error = 1; }
 
+pth_attr_t PyThread_attr;
+
 /*
  * Initialization.
  */
@@ -37,6 +39,9 @@
 static void PyThread__init_thread(void)
 {
 	pth_init();
+	PyThread_attr = pth_attr_new();
+	pth_attr_set(PyThread_attr, PTH_ATTR_STACK_SIZE, 1<<18);
+	pth_attr_set(PyThread_attr, PTH_ATTR_JOINABLE, FALSE);
 }
 
 /*
@@ -51,7 +56,7 @@
 	if (!initialized)
 		PyThread_init_thread();
 
-	th = pth_spawn(PTH_ATTR_DEFAULT,
+	th = pth_spawn(PyThread_attr,
 				 (void* (*)(void *))func,
 				 (void *)arg
 				 );
