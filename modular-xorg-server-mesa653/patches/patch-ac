$NetBSD$

--- ../Mesa-6.5.3/src/glx/x11/glxext.c.orig	2007-04-09 13:21:13.000000000 -0400
+++ ../Mesa-6.5.3/src/glx/x11/glxext.c
@@ -672,8 +672,9 @@ filter_modes( __GLcontextModes ** server
 	if ( do_delete && (m->visualID != 0) ) {
 	    do_delete = GL_FALSE;
 
-	    fprintf(stderr, "libGL warning: 3D driver claims to not support "
-		    "visual 0x%02x\n", m->visualID);
+		if (m->visualRating != GLX_NON_CONFORMANT_VISUAL_EXT || getenv("LIBGL_DEBUG"))
+			fprintf(stderr, "libGL warning: 3D driver claims to not support "
+				"visual 0x%02x\n", m->visualID);
 	}
 
 	if ( do_delete ) {
