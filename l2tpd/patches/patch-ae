$NetBSD$

--- control.c.orig	2002-04-10 22:09:33.000000000 +0200
+++ control.c
@@ -16,8 +16,6 @@
 #include <errno.h>
 #include <string.h>
 #include <stdio.h>
-#include <netinet/in.h>
-#include <arpa/inet.h>
 #include <unistd.h>
 #include <stdlib.h>
 #include "l2tp.h"
@@ -819,7 +817,7 @@ int control_finish (struct tunnel *t, st
         control_xmit (buf);
         po = NULL;
         po = add_opt (po, "passive");
-        po = add_opt (po, "-detach");
+        po = add_opt (po, "nodetach");
         if (c->lac)
         {
             if (c->lac->defaultroute)
@@ -911,7 +909,7 @@ int control_finish (struct tunnel *t, st
         strncpy (ip2, IPADDY (c->addr), sizeof (ip2));
         po = NULL;
         po = add_opt (po, "passive");
-        po = add_opt (po, "-detach");
+        po = add_opt (po, "nodetach");
         po = add_opt (po, "%s:%s", c->lns->localaddr ? ip1 : "", ip2);
         if (c->lns->authself)
         {
@@ -959,7 +957,7 @@ int control_finish (struct tunnel *t, st
     case OCCN:                 /* jz: get OCCN, so the only thing we must do is to start the pppd */
         po = NULL;
         po = add_opt (po, "passive");
-        po = add_opt (po, "-detach");
+        po = add_opt (po, "nodetach");
         po = add_opt (po, "file");
         strcat (dummy_buf, c->dial_no); /* jz: use /etc/ppp/dialnumber.options for pppd - kick it if you dont like */
         strcat (dummy_buf, ".options");
@@ -1661,7 +1659,6 @@ inline int handle_packet (struct buffer 
                           struct call *c)
 {
     int res;
-    struct timeval tv;
     if (CTBIT (*((_u16 *) buf->start)))
     {
         /* We have a control packet */
