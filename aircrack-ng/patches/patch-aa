$NetBSD$

--- src/osdep/network.c.orig	2009-01-22 23:52:20.000000000 +0100
+++ src/osdep/network.c
@@ -34,10 +34,23 @@
 #include <libkern/OSByteOrder.h>
 #elif defined (__sun) && defined (__sparc) /* Solaris SPARC, not Solaris x86 */
 #include <sys/byteorder.h>
-#else
+#elif defined(__linux__)
 #include <asm/byteorder.h>
+#else
+#include <sys/endian.h>
 #endif /* __MACH__ */
 
+#ifdef __NetBSD__
+#include <sys/types.h>
+#include <machine/bswap.h>
+#if BYTE_ORDER == BIG_ENDIAN
+#define __be64_to_cpu(x) (x)
+#define __be32_to_cpu(x) (x)
+#else
+#define __be64_to_cpu(x) bswap64(x)
+#define __be32_to_cpu(x) bswap32(x)
+#endif
+#endif
 
 #include "osdep.h"
 #include "network.h"
