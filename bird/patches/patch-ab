$NetBSD$

--- sysdep/bsd/krt-sock.c.orig	2009-10-02 08:08:51.000000000 +0000
+++ sysdep/bsd/krt-sock.c
@@ -19,6 +19,7 @@
 #include <net/route.h>
 #include <net/if.h>
 #include <net/if_dl.h>
+#include <errno.h>
 
 #undef LOCAL_DEBUG
 
@@ -198,7 +199,7 @@ krt_sock_send(int cmd, rte *e)
   msg.rtm.rtm_msglen = l;
 
   if ((l = write(rt_sock, (char *)&msg, l)) < 0) {
-          log(L_ERR "KIF: error writting route to socket (%I/%d)", net->n.prefix, net->n.pxlen);
+          log(L_ERR "KIF: error %d writing route to socket (%I/%d)", errno, net->n.prefix, net->n.pxlen);
   }
 }
 
@@ -544,6 +545,10 @@ krt_read_msg(struct proto *p, struct ks_
     case RTM_IFANNOUNCE:	/* FIXME: We should handle it */
       break;
 #endif /* RTM_IFANNOUNCE */
+#ifdef RTM_LOSING
+    case RTM_LOSING:
+      break;
+#endif /* RTM_LOSING */
     default:
         log(L_ERR "Unprocessed RTM_type: %d", msg->rtm.rtm_type);
       break;
