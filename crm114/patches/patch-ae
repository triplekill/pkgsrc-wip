$NetBSD$

--- crm_bit_entropy.c.orig	2006-11-03 09:19:12.000000000 -0600
+++ crm_bit_entropy.c
@@ -1367,7 +1367,7 @@ int crm_expr_bit_entropy_learn (CSL_CELL
 	* (sizeof (ENTROPY_FEATUREBUCKET_STRUCT));
       firlatlen = sparse_spectrum_file_length 
 	* BIT_ENTROPIC_FIR_LOOKASIDE_FRACTION;
-      firlatbytes = firlatlen/ sizeof (long);
+      firlatbytes = firlatlen * sizeof (long);
       
       if (user_trace)
 	fprintf (stderr, 
@@ -1379,7 +1379,7 @@ int crm_expr_bit_entropy_learn (CSL_CELL
       
       //       Write them bytes, all NULs.  (the 1024 is headers).
       //
-      for (j = 0; j < (firlatbytes + nodebytes + 1024)  ; j++)
+      for (j = 0; j < (firlatbytes + nodebytes + 1024 * sizeof(long))  ; j++)
 	fputc ('\000', f);
       
       
