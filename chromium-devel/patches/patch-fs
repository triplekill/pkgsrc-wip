$NetBSD$

--- webkit/glue/webkitclient_impl.cc.orig	2010-09-13 15:17:46.000000000 +0000
+++ webkit/glue/webkitclient_impl.cc
@@ -4,7 +4,7 @@
 
 #include "webkit/glue/webkitclient_impl.h"
 
-#if defined(OS_LINUX)
+#if defined(OS_POSIX) && !defined(OS_MACOSX)
 #include <malloc.h>
 #endif
 
@@ -39,7 +39,7 @@
 #include "webkit/glue/websocketstreamhandle_impl.h"
 #include "webkit/glue/weburlloader_impl.h"
 
-#if defined(OS_LINUX)
+#if defined(OS_POSIX) && !defined(OS_MACOSX)
 #include "v8/include/v8.h"
 #endif
 
@@ -384,7 +384,7 @@ WebKit::WebString WebKitClientImpl::sign
   return WebKit::WebString();
 }
 
-#if defined(OS_LINUX)
+#if defined(OS_POSIX) && !defined(OS_MACOSX) && !defined(OS_NETBSD)
 static size_t memoryUsageMBLinux() {
   struct mallinfo minfo = mallinfo();
   uint64_t mem_usage =
@@ -414,7 +414,7 @@ static size_t memoryUsageMBMac() {
 }
 #endif
 
-#if !defined(OS_LINUX) && !defined(OS_MACOSX)
+#if defined(OS_NETBSD)
 static size_t memoryUsageMBGeneric() {
   using base::ProcessMetrics;
   static ProcessMetrics* process_metrics =
@@ -431,7 +431,7 @@ size_t WebKitClientImpl::memoryUsageMB()
     return current_mem_usage;
 
   current_mem_usage =
-#if defined(OS_LINUX)
+#if defined(OS_POSIX) && !defined(OS_MACOSX) && !defined(OS_NETBSD)
       memoryUsageMBLinux();
 #elif defined(OS_MACOSX)
       memoryUsageMBMac();
