$NetBSD$

--- app/app_base.gypi.orig	2010-09-03 09:04:47.000000000 +0000
+++ app/app_base.gypi
@@ -37,7 +37,7 @@
               'win_util_path.cc',
             ],
           }],
-          ['OS!="linux" and OS!="freebsd" and OS!="openbsd"', {
+          ['OS!="linux" and OS!="freebsd" and OS!="netbsd" and OS!="openbsd"', {
             'sources!': [
               'gtk_dnd_util.cc',
               'gtk_dnd_util.h',
@@ -207,8 +207,10 @@
         'surface/io_surface_support_mac.cc',
         'surface/io_surface_support_mac.h',
         'surface/transport_dib.h',
+        'surface/transport_dib_freebsd.cc',
         'surface/transport_dib_linux.cc',
         'surface/transport_dib_mac.cc',
+        'surface/transport_dib_netbsd.cc',
         'surface/transport_dib_win.cc',
         'table_model.cc',
         'table_model.h',
@@ -262,7 +264,7 @@
         },
       ],
       'conditions': [
-        ['OS=="linux" or OS=="freebsd" or OS=="openbsd"', {
+        ['OS=="linux" or OS=="freebsd" or OS=="netbsd" or OS=="openbsd"', {
           'dependencies': [
             # font_gtk.cc uses fontconfig.
             # TODO(evanm): I think this is wrong; it should just use GTK.
@@ -309,6 +311,16 @@
             'os_exchange_data.cc',
           ],
         }],
+        ['OS!="freebsd"', {
+          'sources!': [
+            'surface/transport_dib_freebsd.cc',
+          ],
+        }],
+        ['OS!="netbsd"', {
+          'sources!': [
+            'surface/transport_dib_netbsd.cc',
+          ],
+        }],
         ['OS=="linux"', {
           'sources': [
             'gfx/gl/gl_context_egl.cc',
