# $NetBSD$

.include "Makefile.common"

PKGNAME=	mplayer-share-${MPLAYER_PKG_VERSION}
COMMENT=	Documentation and fonts used by mplayer and gmplayer

NO_BUILD=	YES
NO_CONFIGURE=	YES

MP_FONTS=	font-arial-iso-8859-1.tar.bz2 \
		font-arial-iso-8859-2.tar.bz2 \
		font-arial-cp1250.tar.bz2
FONT_DIRS=	font-arial-cp1250 font-arial-iso-8859-1 font-arial-iso-8859-2

.for font in ${MP_FONTS}
SITES_${font}=	http://ftp5.mplayerhq.hu/mplayer/releases/fonts/ \
		http://www4.mplayerhq.hu/MPlayer/releases/fonts/ \
		ftp://ftp2.mplayerhq.hu/MPlayer/releases/fonts/ \
		ftp://ftp1.mplayerhq.hu/MPlayer/releases/fonts \
		ftp://ftp5.mplayerhq.hu/mplayer/releases/fonts/ \
		http://www1.mplayerhq.hu/MPlayer/releases/fonts/ \
		http://www2.mplayerhq.hu/MPlayer/releases/fonts/
.endfor

DISTFILES+=	${MP_FONTS}

CVS_REPOSITORIES=	mplayer
CVS_ROOT.mplayer=	:pserver:anonymous:@mplayerhq.hu:/cvsroot/mplayer
CVS_MODULE.mplayer=	main

.include "../../wip/mk/cvs-package.mk"
.include "../../mk/bsd.prefs.mk"

INSTALLATION_DIRS=	man/man1

post-extract:
	${FIND} ${WRKDIR} -type d -name CVS | ${XARGS} ${RM} -rf

do-install:
	${INSTALL_MAN} ${WRKSRC}/DOCS/man/en/mplayer.1 ${PREFIX}/man/man1
	${INSTALL_DATA_DIR} ${PREFIX}/share/mplayer
	${INSTALL_DATA_DIR} ${PREFIX}/share/mplayer/DOCS
	${INSTALL_DATA_DIR} ${PREFIX}/share/mplayer/fonts
	${INSTALL_DATA} ${WRKSRC}/etc/codecs.conf ${PREFIX}/share/mplayer
	${INSTALL_DATA} ${WRKSRC}/etc/input.conf ${PREFIX}/share/mplayer
	(cd ${WRKSRC}/DOCS && \
		${PAX} -rwpppm * ${PREFIX}/share/mplayer/DOCS); \
	${FIND} ${PREFIX}/share/mplayer/DOCS -type d -exec ${CHMOD} \
     		${PKGDIRMODE} \{\} \;
	${FIND} ${PREFIX}/share/mplayer/DOCS -type f -exec ${CHMOD} \
  		${SHAREMODE} \{\} \;
	for D in ${FONT_DIRS}; do \
		(cd ${WRKDIR}/$$D && \
			${PAX} -rwpppm * ${PREFIX}/share/mplayer/fonts); \
	done
	${LN} -s ${PREFIX}/share/mplayer/fonts/font-arial-18-iso-8859-1 \
		${PREFIX}/share/mplayer/font

.include "../../mk/bsd.pkg.mk"
