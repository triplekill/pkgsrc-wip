$NetBSD$

--- xspdinstall.orig	2006-10-18 23:30:52.000000000 -0500
+++ xspdinstall
@@ -1,228 +1,14 @@
-#!/bin/sh
-################################################################################
-#                                                                              #
-#       xspdinstall: simple installation script for XSPD tar files             #
-#                                                                              #
-#       copyright (2004-2005) by Joachim Schulze,Gloxinienweg 22,22523 Hamburg #
-#                        xspd@arcor.de, +49/40/579604                          #
-#                                                                              #
-#       xspdinstall <options>                                                  #
-#                                                                              #
-#       <options>::=                                                           #
-#           <file>                    use use file instead latest file at /tmp #
-#           -q                        quiet mode without prompts               #
-#                                                                              #
-#       created:     27.06.04 J. Schulze                                       #
-#       update:      13.02.05 js: adapted to new internet distribution         #
-#                    20.02.05 js: local usage printing                         #
-#                                                                              #
-#------------------------------------------------------------------------------#
-#                                                                              #
-#       SCCS-Information:                                                      #
-#                                                                              #
-#       @(#)module name:       %M%
-#       @(#)SID:               %I%
-#       @(#)last modification: %G% %U%
-#       @(#)last get:          %H% %T%
-#                                                                              #
-#       CVS/Subversion-Information:                                            #
-#                                                                              #
-#       $Id: xspdinstall,v 1.1 2005/05/31 21:46:13 js Exp $
-#                                                                              #
-################################################################################
+all:xspsys xspapp xspsysdoc
 
-### system dependent environment setting ###
-
-INPUTDIR=/tmp			### the temp path of the files got from internet
-TARFILE=$INPUTDIR/xspsrc*_tar*	### the tar file got from internet, may be gzip
-INSTALLDIR=`pwd` 		### specify full path
-FLIST=$INSTALLDIR/xsp*.tar	### the tar files within the archive
-
-### some default settings ###
-
-PROMPT=1			### 1 <=> prompt before action
-
-case `uname` in
-    Linux)	ECHO="echo -e"
-		NL="\c"
-		;;
-    *)		ECHO="echo"
-		NL="\c"
-		;;
-esac
-
-### variables ###
-
-ERR=0
-
-if [ ${1:-""} = "?" -o ${1:-""} = "-?" ]
-then
-    ERR=100
-fi
-
-if [ $ERR -eq 0 ]
-then
-    while [ $# -gt 0 ]
-    do
-	case $1 in
-	-q)
-	    PROMPT=0
-	    shift
-	    ;;
-	-D)
-	    DEBUG=1
-	    shift
-	    ;;
-	*)
-	    if [ -f $1 ]
-	    then
-		TARFILE=$1
-	    else
-		ERR=100
-	    fi
-	    shift
-	    ;;
-	esac
-    done
-fi
-
-if [ $ERR -eq 0 ]
-then
-    FIL=`ls -rt $TARFILE | tail -1`
-    echo "------------------------------------------------------------" >&2
-    echo "extracting $FIL" >&2
-    if [ $PROMPT -eq 0 ]
-    then
-	 sleep 2
-    else
-	EX=0
-	while [ $EX -eq 0 ]
-	do
-	    $ECHO "ok? [y|n]: $NL" >&2
-	    read YN
-	    case $YN in
-		n|N)	EX=1
-			ERR=1
-			;;
-		y|Y)	EX=1
-			;;
-	    esac
-	done
-    fi
-    if [ $ERR -eq 0 ]
-    then
-	if (basename $FIL | grep "gz$" >/dev/null)
-	then
-	    gzip -d <$FIL | tar xvfm -
-	else
-	    tar xfvm $FIL
-	fi
-
-	for FIL in $FLIST
-	do
-	    if [ $ERR -eq 0 ]
-	    then
-		echo "------------------------------------------------------------" >&2
-		PREFIX=`basename $FIL | sed -e "s/_.*//"` 
-		case "$PREFIX" in
-		    xspsys)	DIR=xspsys
-				SYSDIR=$DIR
-				;;
-		    xspapp)	DIR=xspapp
-				;;
-		    xspjsys)	DIR=xspjsys
-				;;
-		    xspjava)	DIR=xspjava
-				;;
-		    xspsysdoc)	DIR=xspsys/doc
-				;;
-		    xspjsysdoc)	DIR=xspjsys/doc
-				;;
-		    *)		echo "*** ERROR: illegal input file ***" >&2
-				unset DIR
-				ERR=100;
-				;;
-		esac
-	    fi
-
-	    if [ $ERR -eq 0 ]
-	    then
-		DSTDIR=$INSTALLDIR/$DIR
-		if [ ! -d $DSTDIR ]
-		then
-		    mkdir -p $DSTDIR
-		fi
-		cd $DSTDIR
-
-		echo "install `basename $FIL` to $DSTDIR" >&2
-
-		if [ $PROMPT -eq 0 ]
-		then
-		     sleep 2
-		else
-		    EX=0
-		    while [ $EX -eq 0 ]
-		    do
-			$ECHO "ok? [y|n]: $NL" >&2
-			read YN
-			case $YN in
-			    n|N)	EX=1
-				    ERR=1
-				    ;;
-			    y|Y)	EX=1
-				    ;;
-			esac
-		    done
-		fi
-
-		if [ $ERR -eq 0 ]
-		then
-		    if (echo $FIL | grep "gz$" >/dev/null)
-		    then
-			### gzip'd compressed file ###
-			gzip -d <$FIL
-		    else
-			### file not compressed ###
-			cat $FIL
-		    fi \
-			| tar xfvm -
-		fi
-	    fi
-
-	done
-    fi
-fi
-
-if [ $ERR -ne 0 ]
-then
-    [ $ERR -ne 100 ] && echo "*** some errors occured ***" >&2
-    cat `type $0 | cut -d' ' -f3` \
-	| awk '
-BEGIN		{ printf("\nUsage:"); }
-/^#########/,/created:/	{
-		if ($0 ~ "created:")
-		    exit;
-		line = $0;
-		gsub("^##*","",line);
-		gsub(" *#*$","",line);
-		if ((lcnt==0)&&(line==""))
-		    { lcnt++; next; }
-		print line;
-		next;
-		}
-	      '
-    exit $ERR
-else
-    echo "" >&2
-    echo " ------------------------------------------------------------ " >&2
-    echo "| 1st step of installation finished.                         |" >&2
-    echo "| Some additional configurations must be done at Makefile's. |" >&2
-    echo "| See installation description at \"Readme.txt\"               |" >&2
-    echo "| or via browser the HTML version \"Readme.html\".             |" >&2
-    echo " ------------------------------------------------------------ " >&2
-    echo "" >&2
-    ls $INSTALLDIR/$SYSDIR${SYSDIR:+/}Readme.txt >&2
-    echo "" >&2
-fi
-
-exit $ERR
+xspsys:
+	echo Extracting xspd server source
+	mkdir ${.TARGET}
+	tar -xf ${XSPSYS_TAR} -C ${.TARGET}
+xspapp:
+	echo Extracting xspd sample application source
+	mkdir ${.TARGET}
+	tar -xf ${XSPAPP_TAR} -C ${.TARGET}
+xspsysdoc:
+	echo Extracting xspd server documentation
+	mkdir ${.TARGET}
+	tar -xf ${XSPSYSDOC_TAR} -C ${.TARGET}
