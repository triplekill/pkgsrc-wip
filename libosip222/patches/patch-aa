$NetBSD: patch-aa,v 1.2 2006/01/29 22:29:01 schwarz Exp $

--- src/osip2/port_sema.c.orig	Sat Jan 28 19:57:17 2006
+++ src/osip2/port_sema.c	Sat Jan 28 19:58:11 2006
@@ -147,7 +147,6 @@
 struct osip_sem *
 osip_sem_init (unsigned int value)
 {
-  union semun val;
   int i;
   osip_sem_t *sem = (osip_sem_t *) osip_malloc (sizeof (osip_sem_t));
 
@@ -161,8 +160,7 @@
       osip_free (sem);
       return NULL;
     }
-  val.val = (int) value;
-  i = semctl (sem->semid, 0, SETVAL, val);
+  i = semctl (sem->semid, 0, SETVAL, value);
   if (i != 0)
     {
       perror ("semctl error");
@@ -175,13 +173,11 @@
 int
 osip_sem_destroy (struct osip_sem *_sem)
 {
-  union semun val;
   osip_sem_t *sem = (osip_sem_t *) _sem;
 
   if (sem == NULL)
     return 0;
-  val.val = 0;
-  semctl (sem->semid, 0, IPC_RMID, val);
+  semctl (sem->semid, 0, IPC_RMID, 0);
   osip_free (sem);
   return 0;
 }
