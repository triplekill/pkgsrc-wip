# $NetBSD$
#

DISTNAME=	hugov30_unix_source
PKGNAME=	wxhugo-3.0.06
WRKSRC=		${WRKDIR}/hugov3.0.06/hewx
CATEGORIES=	games
MASTER_SITES=	http://www.ifarchive.org/if-archive/programming/hugo/source/
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} ${DISTFILE_WX}

MAINTAINER=	dillo@NetBSD.org
HOMEPAGE=	http://161.184.245.22/tessman/gcc/hugo.html
COMMENT=	Interactive fiction interpreter with sound and graphics support

DISTFILE_WX=	hugov30_wxwin_source${EXTRACT_SUFX}
EXTRACT_ONLY=	${DISTNAME}${EXTRACT_SUFX}

USE_BUILDLINK2=	yes
USE_GNU_TOOLS+=	make

LIBDIR=		${PREFIX}/share/hugo

post-extract:
	extract_file="${DISTDIR}/${DISTFILE_WX}"; export extract_file;    \
	cd ${WRKSRC}/.. && ${EXTRACT_CMD.tar.gz}
	for f in hejpeg.cpp hesound.cpp hesound_SDL.cpp hewxwin.cpp; \
	do \
		{ cd ${WRKSRC} && ${MV} $$f $$f.dos \
			&& ${TR} -d '\015' < $$f.dos > $$f; }; \
	done
	for f in hevideo.cpp; \
	do \
		{ cd ${WRKSRC} && ${MV} $$f $$f.mac \
			&& ${TR} '\015' '\012' < $$f.mac > $$f; }; \
	done

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/hewx ${PREFIX}/bin

.include "../../audio/libmikmod/buildlink2.mk"
.include "../../x11/wxGTK/buildlink2.mk"
.include "../../mk/bsd.pkg.mk"
