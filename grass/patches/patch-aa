$NetBSD$

--- configure.orig	2004-12-17 13:22:04.000000000 -0700
+++ configure
@@ -639,7 +639,8 @@ for ac_site_file in $CONFIG_SITE; do
   fi
 done
 
-
+ac_save_ldflags="$LDFLAGS -L${PREFIX}/grass-6.0.0/lib -Wl,-R${PREFIX}/grass-6.0.0/lib"
+LDFLAGS="${ac_save_ldflags}"
 ac_ext=c
 # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
 ac_cpp='$CPP $CPPFLAGS'
@@ -1106,7 +1107,8 @@ fi
 
 GISBASE=${DSTDIR}/dist.${ARCH}
 GRASS_BIN=${DSTDIR}/bin.${ARCH}
-
+ac_save_ldflags="$LDFLAGS -L${GISBASE}/lib -Wl,-R${GISBASE}/lib"
+LDFLAGS="$ac_save_ldflags"
 
 
 
@@ -8207,7 +8209,7 @@ echo "configure:8207: checking for Tcl_I
 ac_lib_var=`echo tcl'_'Tcl_Init | sed 'y%./+-%__p_%'`
 
 ac_save_LIBS="$LIBS"
-LIBS="-ltcl $MATHLIB $LIBS"
+LIBS="-lpthread -ltcl $MATHLIB $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 8213 "configure"
 #include "confdefs.h"
@@ -8234,7 +8236,7 @@ LIBS="$ac_save_LIBS"
 
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  TCLLIB="$TCLLIB -ltcl $MATHLIB"
+  TCLLIB="$TCLLIB -lpthread -ltcl $MATHLIB"
 else
   echo "$ac_t""no" 1>&6
 
@@ -8498,7 +8500,7 @@ echo "configure:8498: checking for Tk_Ma
 ac_lib_var=`echo tk'_'Tk_MainWindow | sed 'y%./+-%__p_%'`
 
 ac_save_LIBS="$LIBS"
-LIBS="-ltk $TCLLIB $MATHLIB $LIBS"
+LIBS="-lX11 -lpthread -ltk $TCLLIB $MATHLIB $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 8504 "configure"
 #include "confdefs.h"
@@ -8525,7 +8527,7 @@ LIBS="$ac_save_LIBS"
 
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  TKLIB="$TKLIB -ltk $MATHLIB"
+  TKLIB="$TKLIB -lX11 -lpthread -ltk $MATHLIB"
 else
   echo "$ac_t""no" 1>&6
 
