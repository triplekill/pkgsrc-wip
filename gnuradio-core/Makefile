# $NetBSD: Makefile,v 1.40 2014/05/09 07:37:08 wiz Exp $

PKGNAME=	gnuradio-core-${VERSION}
COMMENT=	Runtime system and DSP blocks for GNU Radio

PLIST_MINUS=	# empty
.include	"../../wip/gnuradio-core/Makefile.common"

BUILD_DEPENDS+=		${PYPKGPREFIX}-cheetah-[0-9]*:../../devel/py-cheetah
# gnuradio-companion wants:
DEPENDS+=		${PYPKGPREFIX}-lxml-[0-9]*:../../textproc/py-lxml/

CONF_FILES+=	${EGDIR}/gnuradio-runtime.conf	${PKG_SYSCONFSUBDIR}/gnuradio-runtime.conf
CONF_FILES+=	${EGDIR}/gr-audio-alsa.conf	${PKG_SYSCONFSUBDIR}/gr-audio-alsa.conf
CONF_FILES+=	${EGDIR}/gr-audio-jack.conf	${PKG_SYSCONFSUBDIR}/gr-audio-jack.conf
CONF_FILES+=	${EGDIR}/gr-audio-oss.conf	${PKG_SYSCONFSUBDIR}/gr-audio-oss.conf
CONF_FILES+=	${EGDIR}/gr-audio-portaudio.conf ${PKG_SYSCONFSUBDIR}/gr-audio-portaudio.conf
CONF_FILES+=	${EGDIR}/gr-audio.conf		${PKG_SYSCONFSUBDIR}/gr-audio.conf

# set default as minimum
CMAKE_ARGS+=	-DENABLE_DEFAULT=False

# Take care CONF_FILES stuff (The same code in Nocore.mk)
post-install:
	${INSTALL_DATA_DIR} ${DESTDIR}${PREFIX}/${EGDIR}
	${MV} ${DESTDIR}${PREFIX}/etc/gnuradio/conf.d/* \
	      ${DESTDIR}${PREFIX}/${EGDIR}/

.include	"../../mk/bsd.pkg.mk"
