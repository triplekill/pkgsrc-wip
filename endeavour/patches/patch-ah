$NetBSD$

--- endeavour2/lib/edv_device.c.orig	2006-07-01 20:44:04.000000000 -0400
+++ endeavour2/lib/edv_device.c
@@ -1,12 +1,14 @@
 #include <string.h>
 #if defined(__FreeBSD__)
-#include <sys/param.h>
-#include <sys/mount.h>
-#else
-#include <sys/vfs.h>
-#endif
-#if defined(__SOLARIS__)
+# include <sys/param.h>
+# include <sys/mount.h>
+#elif defined(__SOLARIS__)
+# include <sys/vfs.h>
 # include <sys/statvfs.h>
+#elif defined(__NetBSD__)
+# include <sys/statvfs.h>
+#else
+# include <sys/vfs.h>
 #endif
 #include <glib.h>
 
@@ -229,7 +231,7 @@ void EDVDevicesListUpdateStats(
 	gint i;
 	const gchar *mount_path;
 	edv_device_struct *dev;
-#if defined(__SOLARIS__)
+#if defined(__SOLARIS__)||defined(__NetBSD__)
 	struct statvfs buf;
 #else
 	struct statfs buf;
@@ -251,7 +253,7 @@ void EDVDevicesListUpdateStats(
 	    if(EDV_DEVICE_IS_MOUNTED(dev))
 	    {
 		mount_path = dev->mount_path;
-#if defined(__SOLARIS__)
+#if defined(__SOLARIS__)||defined(__NetBSD__)
 		if(!STRISEMPTY(mount_path) ?
 		    !statvfs(mount_path, &buf) : FALSE
 		)
