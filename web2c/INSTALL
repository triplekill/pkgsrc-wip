# $NetBSD$

TEXMFSYSVAR=`@KPSEWHICH@ -var-value=TEXMFSYSVAR`
FMTDIR=${TEXMFSYSVAR}/web2c

case "${STAGE}" in
POST-INSTALL)
	${MKDIR} -p ${FMTDIR}/tex
	@PREFIX@/bin/tex -ini -jobname=tex -progname=tex tex.ini
	${MV} -f *.fmt ${FMTDIR}/tex
	${MKDIR} -p ${FMTDIR}/metafont
	@PREFIX@/bin/mf-nowin -ini -jobname=mf -progname=mf \
	    -translate-file=cp227.tcx mf.ini
	${MV} -f mf.base ${FMTDIR}/metafont
	${MKDIR} -p ${FMTDIR}/metapost
	@PREFIX@/bin/mpost -ini -jobname=metafun -progname=mpost \
	    -translate-file=cp227.tcx metafun.mp
	@PREFIX@/bin/mpost -ini -jobname=mpost -progname=mpost \
	    -translate-file=cp227.tcx mpost.mp
	${MV} -f *.mem ${FMTDIR}/metapost
	${MKDIR} -p ${FMTDIR}/omega
	@PREFIX@/bin/omega -ini -jobname=omega -progname=omega omega.ini
	@PREFIX@/bin/omega -ini -jobname=lambda -progname=lambda lambda.ini
	${MV} -f *.fmt ${FMTDIR}/omega
	${MKDIR} -p ${FMTDIR}/aleph
	@PREFIX@/bin/aleph -ini -jobname=aleph -progname=aleph *aleph.ini
	@PREFIX@/bin/aleph -ini -jobname=lamed -progname=lamed *lambda.ini
	${MV} -f *.fmt ${FMTDIR}/aleph
	${MKDIR} -p ${FMTDIR}/pdftex
	@PREFIX@/bin/pdftex -ini -jobname=amstex -progname=amstex \
	    -translate-file=cp227.tcx *amstex.ini
	@PREFIX@/bin/pdftex -ini -jobname=cont-en -progname=context \
	    -8bit *cont-en.ini
	@PREFIX@/bin/pdftex -ini -jobname=mptopdf -progname=context \
	    -translate-file=cp227.tcx mptopdf.tex
	@PREFIX@/bin/pdftex -ini -jobname=cslatex -progname=cslatex \
	    -etex -translate-file=cp227.tcx cslatex.ini
	@PREFIX@/bin/pdftex -ini -jobname=pdfcslatex -progname=pdfcslatex \
	    -etex -translate-file=cp227.tcx cslatex.ini
	@PREFIX@/bin/pdftex -ini -jobname=csplain -progname=csplain \
	    -etex -translate-file=cp227.tcx csplain.ini
	@PREFIX@/bin/pdftex -ini -jobname=pdfcsplain -progname=pdfcsplain \
	    -etex -translate-file=cp227.tcx csplain.ini
	@PREFIX@/bin/pdftex -ini -jobname=eplain -progname=eplain \
	    -translate-file=cp227.tcx *eplain.ini
	@PREFIX@/bin/pdftex -ini -jobname=latex -progname=latex \
	    -translate-file=cp227.tcx *latex.ini
	@PREFIX@/bin/pdftex -ini -jobname=pdflatex -progname=pdflatex \
	    -translate-file=cp227.tcx *pdflatex.ini
	@PREFIX@/bin/pdftex -ini -jobname=jadetex -progname=jadetex \
	    &latex jadetex.ini
	@PREFIX@/bin/pdftex -ini -jobname=pdfjadetex -progname=pdfjadetex \
	    &pdflatex pdfjadetex.ini
	@PREFIX@/bin/pdftex -ini -jobname=mex -progname=mex \
	    -translate-file=cp227.tcx \*mex.ini
	@PREFIX@/bin/pdftex -ini -jobname=pdfmex -progname=pdfmex \
	    -translate-file=cp227.tcx \*pdfmex.ini
	@PREFIX@/bin/pdftex -ini -jobname=mltex -progname=mltex \
	    -translate-file=cp227.tcx -mltex mltex.ini
	@PREFIX@/bin/pdftex -ini -jobname=mllatex -progname=mllatex \
	    -translate-file=cp227.tcx -mltex mllatex.ini
	@PREFIX@/bin/pdftex -ini -jobname=etex -progname=etex \
	    -translate-file=cp227.tcx \*etex.ini
	@PREFIX@/bin/pdftex -ini -jobname=pdfetex -progname=pdfetex \
	    -translate-file=cp227.tcx \*pdfetex.ini
	@PREFIX@/bin/pdftex -ini -jobname=pdftex -progname=pdftex \
	    -translate-file=cp227.tcx \*pdfetex.ini
	@PREFIX@/bin/pdftex -ini -jobname=physe -progname=physe physe.ini
	@PREFIX@/bin/pdftex -ini -jobname=phyzzx -progname=phyzzx physe.ini
	@PREFIX@/bin/pdftex -ini -jobname=texsis -progname=texsis \
	    -translate-file=cp227.tcx texsis.ini
	@PREFIX@/bin/pdftex -ini -jobname=utf8mex -progname=utf8mex \
	    -enc \*utf8mex.ini
	@PREFIX@/bin/pdftex -ini -jobname=xmltex -progname=xmltex \
	    \&latex xmltex.ini
	@PREFIX@/bin/pdftex -ini -jobname=pdfxmltex -progname=pdfxmltex \
	    \&pdflatex pdfxmltex.ini
	${MV} -f *.fmt ${FMTDIR}/pdftex
	${MKDIR} -p ${FMTDIR}/xetex
	@PREFIX@/bin/xetex -ini -jobname=cont-en -progname=context \
	    -8bit *cont-en.ini
	@PREFIX@/bin/xetex -ini -jobname=xetex -progname=xetex \
	    -etex xetex.ini
	@PREFIX@/bin/xetex -ini -jobname=xelatex -progname=xelatex \
	    -etex xelatex.ini
	${MV} -f *.fmt ${FMTDIR}/xetex
	${MKDIR} -p ${FMTDIR}/luatex
	@PREFIX@/bin/luatex -ini -jobname=luatex -progname=luatex luatex.ini
	@PREFIX@/bin/luatex -ini -jobname=pdfluatex -progname=pdfluatex \
	    pdfluatex.ini
	@PREFIX@/bin/luatex -ini -jobname=lualatex -progname=lualatex \
	    lualatex.ini
	@PREFIX@/bin/luatex -ini -jobname=pdflualatex -progname=pdflualatex \
	    pdflualatex.ini
	${MV} -f *.fmt ${FMTDIR}/luatex
	${RM} -f *.log *.aux
	@MKTEXLSR@ ${TEXMFSYSVAR}
	;;
esac
