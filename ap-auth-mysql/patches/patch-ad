$NetBSD$

--- mod_auth_mysql.c.orig	2003-11-18 13:59:00.000000000 +0100
+++ mod_auth_mysql.c
@@ -62,7 +62,7 @@ static int	auth_db_override = 1;
 #define CRYPT_MD5_ENCRYPTION_FLAG	1<<3
 #endif
 #define PHP_MD5_ENCRYPTION_FLAG		1<<4
-#ifdef HAVE_CRYPT_H
+#if defined(HAVE_CRYPT_H) || defined(HAVE_LIBCRYPT)
 #define CRYPT_ENCRYPTION_FLAG		1<<5
 #endif
 
@@ -94,7 +94,7 @@ static int check_crypt_MD5_encryption(co
 }
 #endif
 
-#ifdef HAVE_CRYPT_H
+#if defined(HAVE_CRYPT_H) || defined(HAVE_LIBCRYPT)
 static int check_crypt_encryption(const char *passwd, char *enc_passwd)
 {
 	return (!strcmp(crypt(passwd, enc_passwd), enc_passwd));
@@ -165,7 +165,9 @@ encryption_type_entry supported_encrypti
 #if CRYPT_MD5
 	{ "Crypt_MD5",		check_crypt_MD5_encryption,		CRYPT_MD5_ENCRYPTION_FLAG },
 #endif
+#if defined(HAVE_CRYPT_H) || defined(HAVE_LIBCRYPT)
 	{ "Crypt",		check_crypt_encryption,			CRYPT_ENCRYPTION_FLAG },
+#endif
 	{ "PHP_MD5",		check_PHP_MD5_encryption,		PHP_MD5_ENCRYPTION_FLAG	},
 	/* add additional encryption types below */
 	{ NULL,			NULL,					0 }
