$NetBSD$

--- h/NetBSD.h.orig	1999-12-07 01:44:02.000000000 +0300
+++ h/NetBSD.h	2008-02-16 21:42:28.000000000 +0300
@@ -29,9 +29,9 @@
     Modified gcl-1.1 for NetBSD 1.0Beta (static linked)
 
 */
-
+#include <sys/signal.h>
+#include <signal.h>
 #include "bsd.h"
-/*#include "386.h" /* NOT if you want this to work on 386bsd!!!*/
 
 #define ADDITIONAL_FEATURES \
 		     ADD_FEATURE("386BSD");\
@@ -79,12 +79,16 @@
 /* begin setup alternate signal stack */
 #define SIG_STACK_SIZE SIGSTKSZ
 #define SETUP_SIG_STACK \
-{ static struct sigaltstack estack ; \
-  estack.ss_size = sizeof(estack_buf) ; \
-  estack.ss_flags = 0; \
-  estack.ss_base = (char *) &estack_buf[SIG_STACK_SIZE-1]; \
-  if (sigaltstack(&estack, (struct sigaltstack *)0) < 0) \
-               perror("sigaltstack");} \
+	{ static stack_t estack ; /* in <sys/sigtypes.h> */		\
+		/* copied from powerpc-macosx.h -- ASau */		\
+		static double estack_buf [SIG_STACK_SIZE];		\
+		bzero(estack_buf, sizeof(estack_buf));			\
+		estack.ss_size = sizeof(estack_buf) ;			\
+		estack.ss_flags = 0;					\
+		estack.ss_sp = (char *) &estack_buf[SIG_STACK_SIZE-1];	\
+		if (sigaltstack(&estack, (stack_t *)0) < 0)		\
+			perror("sigaltstack");				\
+	}								\
 
 /* end setup signal stack  */
 
