$NetBSD$

--- work.i386/asterisk-0.4.0/channels/chan_oss.c-	2003-08-24 09:58:27.000000000 +0900
+++ work.i386/asterisk-0.4.0/channels/chan_oss.c	2003-08-24 10:01:14.000000000 +0900
@@ -33,7 +33,11 @@
 #include <string.h>
 #include <stdlib.h>
 #include <stdio.h>
+#ifdef __NetBSD__
+#include <soundcard.h>
+#else
 #include <linux/soundcard.h>
+#endif
 #include "busy.h"
 #include "ringtone.h"
 #include "ring10.h"
@@ -360,7 +364,7 @@
 		return 0;
 	readmode = 0;
 	if (force || time_has_passed()) {
-		ioctl(sounddev, SNDCTL_DSP_RESET);
+		ioctl(sounddev, SNDCTL_DSP_RESET, 0);
 		/* Keep the same fd reserved by closing the sound device and copying stdin at the same
 		   time. */
 		/* dup2(0, sound); */ 
@@ -390,7 +394,7 @@
 		return 0;
 	readmode = -1;
 	if (force || time_has_passed()) {
-		ioctl(sounddev, SNDCTL_DSP_RESET);
+		ioctl(sounddev, SNDCTL_DSP_RESET, 0);
 		close(sounddev);
 		/* dup2(0, sound); */
 		fd = open(DEV_DSP, O_RDONLY | O_NONBLOCK);
