$NetBSD$

--- util/deviceiter.c.orig	2009-11-09 16:48:16.000000000 +0100
+++ util/deviceiter.c
@@ -111,7 +111,12 @@ get_kfreebsd_version (void)
 
 #if defined(__FreeBSD_kernel__) || defined(__NetBSD__) || defined(__OpenBSD__)
 # include <sys/ioctl.h>		/* ioctl */
-# include <sys/disklabel.h>
+  /* the preprocessor macro `UNUSED', which is defined in grub/types.h,
+     conflicts with NetBSD's sys/disklabel.h, where the word `UNUSED'
+     appears. */
+# if !defined(__NetBSD__)
+#  include <sys/disklabel.h>
+# endif
 # include <sys/cdio.h>		/* CDIOCCLRDEBUG */
 # if defined(__FreeBSD_kernel__)
 #  include <sys/param.h>
