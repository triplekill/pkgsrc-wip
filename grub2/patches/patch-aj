$NetBSD$

--- util/grub-emu.c.orig	2005-11-13 16:47:09.000000000 +0100
+++ util/grub-emu.c
@@ -172,6 +172,9 @@ main (int argc, char *argv[])
       sleep (1);
     }
   
+  /* XXX: This is a bit unportable.  */
+  grub_util_biosdisk_init (args.dev_map);
+
   /* Make sure that there is a root device.  */
   if (! args.root_dev)
     {
@@ -189,9 +192,6 @@ main (int argc, char *argv[])
 
   grub_env_set ("prefix", rootprefix);
   
-  /* XXX: This is a bit unportable.  */
-  grub_util_biosdisk_init (args.dev_map);
-
   grub_init_all ();
 
   /* Start GRUB!  */
