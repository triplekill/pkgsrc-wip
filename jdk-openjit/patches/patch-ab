$NetBSD$

--- rt-X86.c.orig	Mon Feb 17 17:11:27 2003
+++ rt-X86.c
@@ -2422,7 +2422,7 @@ do {						\
     /* resume from signal */			\
     return;					\
 } while(0);
-#elif defined(__FreeBSD__)
+#elif defined(__FreeBSD__) || defined(__NetBSD__)
 #define EAX	sc_eax
 #define ECX	sc_ecx
 #define EDX	sc_edx
@@ -2492,7 +2492,7 @@ OpenJIT_SignalHandler(int sig, void *inf
 #endif
 	    scp = (struct sigcontext *)(ebp + 3);
     }
-#elif defined(__FreeBSD__)
+#elif defined(__FreeBSD__) || defined(__NetBSD__)
     scp = (struct sigcontext *)uc;
 #elif defined(sun)
     scp = &((ucontext_t *)uc)->uc_mcontext;
@@ -2553,7 +2553,7 @@ OpenJIT_SignalHandler(int sig, void *inf
 	SIGRETURN(scp);
 
     case SIGSEGV:
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__NetBSD__)
     case SIGBUS:
 #endif
 	if (*pc == 0xcd) {
